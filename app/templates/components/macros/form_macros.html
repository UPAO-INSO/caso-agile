{# 
  Macros reutilizables para formularios
  Uso: {% from 'components/macros/form_macros.html' import input_field, select_field, submit_button %}
#}

{# Input Field #}
{% macro input_field(name, label, type='text', value='', placeholder='', required=false, min=none, max=none, step=none) %}
<div class="mb-4">
  <label for="{{ name }}" class="block text-sm font-medium text-gray-700 mb-2">
    {{ label }}
    {% if required %}<span class="text-red-500">*</span>{% endif %}
  </label>
  <input 
    type="{{ type }}" 
    id="{{ name }}" 
    name="{{ name }}" 
    value="{{ value }}"
    {% if placeholder %}placeholder="{{ placeholder }}"{% endif %}
    {% if required %}required{% endif %}
    {% if min %}min="{{ min }}"{% endif %}
    {% if max %}max="{{ max }}"{% endif %}
    {% if step %}step="{{ step }}"{% endif %}
    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"
  >
</div>
{% endmacro %}

{# Select Field #}
{% macro select_field(name, label, options, selected='', required=false) %}
<div class="mb-4">
  <label for="{{ name }}" class="block text-sm font-medium text-gray-700 mb-2">
    {{ label }}
    {% if required %}<span class="text-red-500">*</span>{% endif %}
  </label>
  <select 
    id="{{ name }}" 
    name="{{ name }}" 
    {% if required %}required{% endif %}
    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"
  >
    <option value="">Seleccione...</option>
    {% for value, text in options %}
    <option value="{{ value }}" {% if value == selected %}selected{% endif %}>{{ text }}</option>
    {% endfor %}
  </select>
</div>
{% endmacro %}

{# Textarea Field #}
{% macro textarea_field(name, label, value='', placeholder='', rows=3, required=false) %}
<div class="mb-4">
  <label for="{{ name }}" class="block text-sm font-medium text-gray-700 mb-2">
    {{ label }}
    {% if required %}<span class="text-red-500">*</span>{% endif %}
  </label>
  <textarea 
    id="{{ name }}" 
    name="{{ name }}" 
    rows="{{ rows }}"
    {% if placeholder %}placeholder="{{ placeholder }}"{% endif %}
    {% if required %}required{% endif %}
    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"
  >{{ value }}</textarea>
</div>
{% endmacro %}

{# Checkbox Field #}
{% macro checkbox_field(name, label, checked=false) %}
<div class="mb-4 flex items-center">
  <input 
    type="checkbox" 
    id="{{ name }}" 
    name="{{ name }}" 
    {% if checked %}checked{% endif %}
    class="w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"
  >
  <label for="{{ name }}" class="ml-2 text-sm font-medium text-gray-700">
    {{ label }}
  </label>
</div>
{% endmacro %}

{# Submit Button #}
{% macro submit_button(text='Enviar', type='primary', icon='', loading_text='Procesando...') %}
{% set button_classes = {
  'primary': 'bg-blue-600 hover:bg-blue-700 text-white',
  'secondary': 'bg-gray-600 hover:bg-gray-700 text-white',
  'success': 'bg-green-600 hover:bg-green-700 text-white',
  'danger': 'bg-red-600 hover:bg-red-700 text-white'
} %}

{% set class = button_classes.get(type, button_classes['primary']) %}

<button 
  type="submit" 
  class="w-full inline-flex items-center justify-center px-6 py-3 rounded-lg font-medium transition-colors {{ class }}"
>
  {% if icon %}<span class="mr-2">{{ icon }}</span>{% endif %}
  <span class="submit-text">{{ text }}</span>
  <span class="loading-text hidden">{{ loading_text }}</span>
</button>
{% endmacro %}

{# Form Group (para agrupar campos relacionados) #}
{% macro form_group(title, icon='') %}
<div class="mb-6 pb-6 border-b border-gray-200">
  <h3 class="text-lg font-semibold text-gray-800 mb-4 flex items-center">
    {% if icon %}<span class="mr-2">{{ icon }}</span>{% endif %}
    {{ title }}
  </h3>
  {{ caller() }}
</div>
{% endmacro %}
