{% extends 'base.html' %} {% block content %}
<div class="container mx-auto px-4 py-4 max-w-7xl">
  <!-- Header Section -->
  <div class="mb-5">
    <a
      href="/api/v1/clientes/list"
      class="inline-flex items-center gap-2 text-blue-600 hover:text-blue-700 text-sm font-medium mb-3"
    >
      <span>‚Üê</span> Volver a Lista de Clientes
    </a>
    <h1 class="text-3xl font-semibold text-gray-900 mb-2">
      Historial de Pr√©stamos
    </h1>
    <p class="text-sm text-gray-600">
      Cliente:
      <span class="font-semibold">{{ cliente.nombre_completo }}</span> | DNI:
      <span class="font-semibold">{{ cliente.dni }}</span>
      {% if cliente.pep %}
      <span
        class="inline-flex items-center gap-1.5 bg-red-50 text-red-700 px-3 py-1 rounded-full text-xs font-semibold ml-2"
      >
        <span class="w-2 h-2 bg-red-600 rounded-full"></span>
        PEP
      </span>
      {% endif %}
    </p>
  </div>

  <!-- Prestamos List -->
  {% if prestamos %}
  <div class="bg-white rounded-xl overflow-hidden shadow-sm">
    <div class="overflow-x-auto">
      <table class="w-full border-collapse">
        <thead class="bg-gray-50">
          <tr>
            <th
              class="px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider border-b-2 border-gray-200"
            >
              ID
            </th>
            <th
              class="px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider border-b-2 border-gray-200"
            >
              Monto
            </th>
            <th
              class="px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider border-b-2 border-gray-200"
            >
              Plazo
            </th>
            <th
              class="px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider border-b-2 border-gray-200"
            >
              Fecha Otorgamiento
            </th>
            <th
              class="px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider border-b-2 border-gray-200"
            >
              Estado
            </th>
            <th
              class="px-6 py-4 text-center text-xs font-semibold text-gray-600 uppercase tracking-wider border-b-2 border-gray-200"
            >
              Acciones
            </th>
          </tr>
        </thead>
        <tbody class="bg-white">
          {% for p in prestamos %}
          <tr class="hover:bg-gray-50 transition-colors duration-150">
            <td
              class="px-6 py-4 text-sm font-semibold text-gray-900 border-b border-gray-100"
            >
              #{{ p.id }}
            </td>
            <td
              class="px-6 py-4 text-sm text-gray-700 border-b border-gray-100"
            >
              {{ p.monto }}
            </td>
            <td
              class="px-6 py-4 text-sm text-gray-700 border-b border-gray-100"
            >
              {{ p.plazo }} meses
            </td>
            <td
              class="px-6 py-4 text-sm text-gray-600 border-b border-gray-100"
            >
              {{ p.f_otorgamiento }}
            </td>
            <td class="px-6 py-4 border-b border-gray-100">
              {% if p.estado == 'VIGENTE' %}
              <span
                class="inline-flex items-center gap-1.5 bg-green-50 text-green-700 px-3 py-1 rounded-full text-xs font-semibold"
              >
                <span class="w-2 h-2 bg-green-600 rounded-full"></span>
                {{ p.estado }}
              </span>
              {% elif p.estado == 'CANCELADO' %}
              <span
                class="inline-flex items-center gap-1.5 bg-gray-50 text-gray-700 px-3 py-1 rounded-full text-xs font-semibold"
              >
                <span class="w-2 h-2 bg-gray-600 rounded-full"></span>
                {{ p.estado }}
              </span>
              {% else %}
              <span
                class="inline-flex items-center gap-1.5 bg-yellow-50 text-yellow-700 px-3 py-1 rounded-full text-xs font-semibold"
              >
                <span class="w-2 h-2 bg-yellow-600 rounded-full"></span>
                {{ p.estado }}
              </span>
              {% endif %}
            </td>
            <td class="px-6 py-4 border-b border-gray-100 text-center">
              <a
                href="{{ url_for('prestamos.detail_prestamo', prestamo_id=p.id) }}"
                class="inline-flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium transition duration-200"
              >
                <span>üëÅÔ∏è</span>
                Ver Detalles
              </a>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
  {% else %}
  <div class="bg-white rounded-xl p-10 text-center shadow-sm">
    <div class="text-gray-400 text-6xl mb-4">üìã</div>
    <h3 class="text-xl font-semibold text-gray-700 mb-2">
      No hay pr√©stamos registrados
    </h3>
    <p class="text-gray-500">
      Este cliente a√∫n no tiene pr√©stamos en el sistema.
    </p>
  </div>
  {% endif %}
</div>
{% endblock %}
