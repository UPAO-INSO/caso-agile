{% extends "base.html" %} {% block content %}
<div class="container mx-auto px-4 py-4 max-w-7xl">
  <!-- Header Section -->
  <div class="mb-5">
    <h1 class="text-3xl font-semibold text-gray-900 mb-2">Lista de Clientes</h1>
    <p class="text-sm text-gray-600">
      Gestión y consulta de clientes registrados
    </p>
  </div>

  <!-- Search Section -->
  <div class="bg-white rounded-xl p-6 mb-6 shadow-sm">
    <form method="GET" class="flex gap-3 items-end flex-wrap">
      <div class="flex-1 min-w-[250px]">
        <label for="dni" class="block text-sm font-medium text-gray-600 mb-1.5">
          Buscar por DNI
        </label>
        <input
          id="dni"
          name="dni"
          type="text"
          placeholder="Ingrese número de DNI..."
          value="{{ request.args.get('dni', '') }}"
          class="w-full px-4 py-3 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition"
        />
      </div>
      <button
        type="submit"
        class="px-7 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium transition duration-200 cursor-pointer"
      >
        Buscar
      </button>
    </form>
  </div>

  <!-- Table Section -->
  <div class="bg-white rounded-xl overflow-hidden shadow-sm">
    <div class="overflow-x-auto">
      <table class="w-full border-collapse">
        <thead class="bg-gray-50">
          <tr>
            <th
              class="px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider border-b-2 border-gray-200"
            >
              DNI
            </th>
            <th
              class="px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider border-b-2 border-gray-200"
            >
              Nombre Completo
            </th>
            <th
              class="px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider border-b-2 border-gray-200"
            >
              PEP
            </th>
            <th
              class="px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider border-b-2 border-gray-200"
            >
              Fecha Registro
            </th>
          </tr>
        </thead>
        <tbody class="bg-white">
          {% for cliente in clientes.items %}
          <tr class="hover:bg-gray-50 transition-colors duration-150">
            <td
              class="px-6 py-4 text-sm font-semibold text-gray-900 border-b border-gray-100"
            >
              {{ cliente.dni }}
            </td>
            <td
              class="px-6 py-4 text-sm text-gray-700 border-b border-gray-100"
            >
              {{ cliente.nombre_completo }}
            </td>
            <td class="px-6 py-4 border-b border-gray-100">
              {% if cliente.pep %}
              <span
                class="inline-flex items-center gap-1.5 bg-red-50 text-red-700 px-3 py-1 rounded-full text-xs font-semibold"
              >
                <span class="w-2 h-2 bg-red-600 rounded-full"></span>
                Sí
              </span>
              {% else %}
              <span
                class="inline-flex items-center gap-1.5 bg-green-50 text-green-700 px-3 py-1 rounded-full text-xs font-semibold"
              >
                <span class="w-2 h-2 bg-green-600 rounded-full"></span>
                No
              </span>
              {% endif %}
            </td>
            <td
              class="px-6 py-4 text-sm text-gray-600 border-b border-gray-100"
            >
              {{ cliente.fecha_registro.strftime('%d/%m/%Y') }}
            </td>
          </tr>
          {% else %}
          <tr>
            <td
              colspan="4"
              class="px-6 py-10 text-center text-gray-500 text-sm"
            >
              No se encontraron clientes con los criterios actuales.
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>

  <!-- Pagination -->
  <div class="mt-6 flex justify-center items-center gap-3">
    {% if clientes.has_prev %}
    <a
      href="{{ url_for('clientes.listar_clientes_view', page=clientes.prev_num, dni=request.args.get('dni', '')) }}"
      class="px-5 py-2.5 bg-white text-gray-700 border border-gray-300 rounded-lg text-sm font-medium hover:bg-gray-50 hover:border-blue-500 transition-all duration-200"
    >
      ← Anterior
    </a>
    {% endif %}

    <span
      class="px-5 py-2.5 bg-gray-50 rounded-lg text-sm text-gray-600 font-medium"
    >
      Página {{ clientes.page }} de {{ clientes.pages }}
    </span>

    {% if clientes.has_next %}
    <a
      href="{{ url_for('clientes.listar_clientes_view', page=clientes.next_num, dni=request.args.get('dni', '')) }}"
      class="px-5 py-2.5 bg-white text-gray-700 border border-gray-300 rounded-lg text-sm font-medium hover:bg-gray-50 hover:border-blue-500 transition-all duration-200"
    >
      Siguiente →
    </a>
    {% endif %}
  </div>
</div>
{% endblock %}
